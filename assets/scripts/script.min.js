let word,selectedCategory="animals",wrongChoices=0,helpAmount=3;const keyboardLayout="QWERTYUIOPASDFGHJKL.ZXCVBNM&".split(""),losingLetterHTML=document.querySelector(".__header ._losing-letters"),helpButton=document.querySelector(".__header .help-icon_"),wordToGuessHTML=document.querySelector(".__game ._guess-word"),keyboardHTML=document.querySelector(".__game ._key"),winLoseHTML=document.querySelector(".__game ._win-lose"),categorySelect=document.querySelector(".__play-again select"),playButton=document.querySelector(".__play-again button");async function loadWordToGuess(){(word=await getWord(selectedCategory)).split("").forEach(e=>{let n=document.createElement("span");" "==e?(n.innerHTML="&nbsp;",n.style.border="none"):"-"==e?(n.innerText="-",n.style.border="none"):n.innerHTML="&nbsp;&nbsp;&nbsp;",wordToGuessHTML.append(n)})}function loadKeyboard(){keyboardLayout.forEach(e=>{let n=document.createElement("span");n.innerText=e,n.dataset.clicked="false",keyboardHTML.append(n),n.addEventListener("click",keyClick)})}async function getWord(e){let n=await fetch("./assets/categories.min.json"),t=await n.json(),o=Math.floor(Math.random()*t[e].length);return t[e][o].toUpperCase()}function keyClick(e){let n;void 0!==this.innerText?(n=this.innerText.toUpperCase(),word.split("").forEach((e,t)=>{n==e&&(this.dataset.clicked="clicked",wordToGuessHTML.children[t].innerHTML=`${e}`)}),this.removeEventListener("click",keyClick)):(n=e,word.split("").forEach((t,o)=>{n==t&&(wordToGuessHTML.children[o].innerHTML=`${t}`,wordToGuessHTML.children[o].removeEventListener("click",keyClick),Array.from(keyboardHTML.children).forEach(n=>{n.innerText==e&&(n.dataset.clicked="hint",n.removeEventListener("click",keyClick))}))})),winCheck(n),loseCheck(n,this)}function winCheck(e){let n="";Array.from(wordToGuessHTML.children).forEach(t=>{t!==e&&(n+=t.innerText)}),(n=n.replace(/\s/g," "))==word&&(Array.from(keyboardHTML.children).forEach(e=>e.removeEventListener("click",keyClick)),helpButton.removeEventListener("click",help),winLoseHTML.innerHTML="You win!",winLoseHTML.style.display="block")}function loseCheck(e,n){word.includes(e)||(wrongChoices++,losingletter(),n.dataset.clicked="wrong"),7==wrongChoices&&(Array.from(wordToGuessHTML.children).forEach((e,n)=>{"\xa0\xa0\xa0"==e.innerText&&(e.style.fontWeight="bold",e.style.fontStyle="italic"),e.innerText=word.split("")[n]}),Array.from(keyboardHTML.children).forEach(e=>e.removeEventListener("click",keyClick)),helpButton.removeEventListener("click",help),winLoseHTML.innerText="You lose!",winLoseHTML.style.display="block")}function playAgain(){"category"!=(selectedCategory=categorySelect.value.toLowerCase())&&(wrongChoices=0,helpAmount=3,Array.from(losingLetterHTML.children).forEach(e=>e.innerHTML="&#160;&#160;&#160;"),document.querySelector(".help-amount_").innerText=`x${helpAmount}`,wordToGuessHTML.innerText="",keyboardHTML.innerText="",winLoseHTML.style.display="none",helpButton.addEventListener("click",help),loadWordToGuess(),loadKeyboard())}function losingletter(){let e=Math.floor(7*Math.random());if(losingLetterHTML.children[e].innerText.includes("\xa0"))switch(e){case 0:losingLetterHTML.children[e].innerText="H";break;case 1:case 5:losingLetterHTML.children[e].innerText="A";break;case 2:case 6:losingLetterHTML.children[e].innerText="N";break;case 3:losingLetterHTML.children[e].innerText="G";break;case 4:losingLetterHTML.children[e].innerText="M"}else losingletter()}function help(){let e=getRandomLetter();helpAmount--,document.querySelector(".help-amount_").innerText=`x${helpAmount}`,0==helpAmount&&helpButton.removeEventListener("click",help),keyClick(e)}function getRandomLetter(){let e=Math.floor(Math.random()*word.length),n=word.split("")[e];return Array.from(wordToGuessHTML.children).forEach(e=>{(n==e.innerText||" "==n)&&(n=getRandomLetter())}),n}helpButton.addEventListener("click",help),playButton.addEventListener("click",playAgain),document.addEventListener("keydown",e=>{keyboardLayout.forEach((n,t)=>{e.key==n.toLowerCase()&&keyboardHTML.children[t].click()})}),document.addEventListener("DOMContentLoaded",()=>{loadWordToGuess(),loadKeyboard()});