let word,selectedCategory="animals",wrongChoices=0,helpLeft=3;const keyboardLayout="1234567890QWERTYUIOPASDFGHJKL-ZXCVBNM.&".split(""),header=document.querySelector(".__header"),helpButton=document.querySelector(".__header ._help"),wordToGuessDiv=document.querySelector(".__game ._guess-word"),keyboardDiv=document.querySelector(".__game ._key"),winLoseDiv=document.querySelector(".__game ._win-lose"),categorySelector=document.querySelector(".__play-again select"),playButton=document.querySelector(".__play-again button");async function loadWordToGuess(){(word=await getWord(selectedCategory)).split("").forEach(e=>{let r=document.createElement("span");" "==e?(r.innerText=" ",r.style.border="none"):r.innerHTML="&nbsp;&nbsp;&nbsp;",wordToGuessDiv.append(r)})}function loadKeyboard(){keyboardLayout.forEach(e=>{let r=document.createElement("span");r.innerText=e,keyboardDiv.append(r),r.addEventListener("click",keyClick)})}function keyClick(e){let r;void 0!==this.innerText?(r=this.innerText.toUpperCase(),word.split("").forEach((e,n)=>{r==e&&(this.classList.add("clicked"),wordToGuessDiv.children[n].innerHTML=`&nbsp;${e}`)}),this.removeEventListener("click",keyClick)):(r=e,word.split("").forEach((n,t)=>{r==n&&(wordToGuessDiv.children[t].innerHTML=`&nbsp;${n}`,wordToGuessDiv.children[t].removeEventListener("click",keyClick),Array.from(keyboardDiv.children).forEach(r=>{r.innerText==e&&(r.classList.add("clicked-hint"),r.removeEventListener("click",keyClick))}))})),winCheck(r),loseCheck(r,this)}function winCheck(e){let r="";Array.from(wordToGuessDiv.children).forEach(n=>{n!==e&&(r+=n.innerText.split("")[1])}),(r=r.replace(/undefined/g," "))===word&&(Array.from(keyboardDiv.children).forEach(e=>e.removeEventListener("click",keyClick)),helpButton.removeEventListener("click",help),winLoseDiv.innerHTML="<h3>You win!</h3>",winLoseDiv.style.display="inline")}function loseCheck(e,r){word.includes(e)||(wrongChoices++,losingletter(),r.classList.add("clicked-wrong")),7===wrongChoices&&(Array.from(wordToGuessDiv.children).forEach((e,r)=>{"\xa0\xa0\xa0"==e.innerText&&(e.style.fontWeight="bold",e.style.fontStyle="italic"),e.innerText=word.split("")[r]}),Array.from(keyboardDiv.children).forEach(e=>e.removeEventListener("click",keyClick)),helpButton.removeEventListener("click",help),winLoseDiv.innerHTML="<h3>You lose!</h3>",winLoseDiv.style.display="inline")}function restartGame(){"category"!=(selectedCategory=categorySelector.value.toLowerCase())&&(wrongChoices=0,helpLeft=3,Array.from(header.children).forEach(e=>{if("_help-left"==e.className){e.innerText=`x${helpLeft}`;return}e.innerHTML="&#160;&#160;&#160;"}),wordToGuessDiv.innerText="",keyboardDiv.innerText="",winLoseDiv.style.display="none",helpButton.addEventListener("click",help),loadWordToGuess(),loadKeyboard())}function losingletter(){let e=Math.floor(7*Math.random());if(header.children[e].innerText.includes("\xa0\xa0\xa0"))switch(e){case 0:header.children[e].innerText="H";break;case 1:case 5:header.children[e].innerText="A";break;case 2:case 6:header.children[e].innerText="N";break;case 3:header.children[e].innerText="G";break;case 4:header.children[e].innerText="M"}else losingletter()}function help(){let e=getRandomLetter();helpLeft--,document.querySelector("._help-left").innerText=`x${helpLeft}`,0==helpLeft&&helpButton.removeEventListener("click",help),keyClick(e)}function getRandomLetter(){let e=Math.floor(Math.random()*word.length),r=word.split("")[e];return Array.from(wordToGuessDiv.children).forEach(e=>{(r==e.innerText.split("")[1]||" "==r)&&(r=getRandomLetter())}),r}async function getWord(e){let r=await fetch("./assets/categories.min.json"),n=await r.json(),t=Math.floor(Math.random()*n[e].length);return n[e][t].toUpperCase()}helpButton.addEventListener("click",help),playButton.addEventListener("click",restartGame),document.addEventListener("keydown",e=>{keyboardLayout.forEach((r,n)=>{e.key==r.toLowerCase()&&keyboardDiv.children[n].click()})}),document.addEventListener("DOMContentLoaded",()=>{loadWordToGuess(),loadKeyboard()});